'use strict';function Di(s,n){function t(b,a){var e=[],d=null;if(!b.length)return e;for(var c=0,g=b.length,f;c<g;++c)if(d=null,(f=k.get(b[c]))&&e.push(f),f||(d=Error(m+b[c])),d&&!a)throw d;return e}function p(b,a,e,d){var c=q(b);if(!c&&!d)throw Error(m+b);if(c&&!~a.indexOf(c.id)){e.push(c.id);c.a=c.a||[];for(var g=0,f=c.a.length;g<f;++g)if(b=c.a[g],!~a.indexOf(b)){if(~e.indexOf(b))throw Error(u+c.id+" -> "+b);p(b,a,e,d)}a.push(c.id);e.splice(e.indexOf(c.id),1)}}function q(b){for(var a=l.length;a--;)if(l[a].id===
b)return l[a];return null}function v(b){for(var a=0,e=l.length;a<e;++a)b.call(null,l[a])}function r(b,a){for(var e=b.split(/\./g),d=e.pop(),c=k,g,f=0,h=e.length;f<h;++f)g=e[f],c=c[g]=c[g]||{};c[d]=a}var l=[],m="Not found: ",u="Circular: ",k={get:function(b){var a=k;b=b.split(/\./g);b[0]===s&&b.shift();for(var e,d=0,c=b.length;d<c;++d){e=b[d];if(!a[e])return null;a=a[e]}return a},resolve:function(){var b=[];v(function(a){a.c||(p(a.id,b,[],!!a.run),a.c=!0)});for(var a=0,e=b.length;a<e;++a){var d=q(b[a]),
c=t(d.a,!!d.run);if(d.inject||d.run){if(c=d.b.apply(k,c.concat(d.d)),d.run)return c}else d.f?r(d.id,d.b):r(d.id,d.b.apply(k,c))}n=!1;return k},provide:function(b,a,e,d,c,g){var f=[],h=null;g=g||[];if(e)h=a;else if("function"===typeof a)h=a,a=/function(\s+)?(\w+)?\((.*)\)/m.exec(h.toString()),f=[],a?a[3].length&&(f=a[3].split(/\s*,\s*/)):f=null;else if("object"===typeof a&&"number"===typeof a.length){h=a;a=[];for(var f=0,m=h.length;f<m;++f){if("function"===typeof h[f]){h=h[f];break}a.push(h[f])}f=
a}else h=a,e=!0;b={id:b,a:f,b:h,f:!!e};d&&(b.inject=!0);c&&(b.run=!0);g&&(b.d=g);l.push(b);return n?k:k.resolve()},inject:function(b){return k.provide(null,b,!1,!0,!1,Array.prototype.slice.apply(arguments).slice(1))},run:function(b){return k.provide(null,b,!1,!0,!0,Array.prototype.slice.apply(arguments).slice(1))}};return k}"undefined"!==typeof module&&module.e?module.e=Di:this.Di=Di;
